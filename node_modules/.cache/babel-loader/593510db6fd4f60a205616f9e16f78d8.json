{"ast":null,"code":"var _jsxFileName = \"/Users/shadiaoutabachi/Desktop/sei-main/hikingapp/hikingApp-frontend/src/App.js\";\nimport React, { Component } from 'react';\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport AuthPage from './AuthPage/AuthPage';\nimport MainContainer from './MainContainer/MainContainer';\n\nclass App extends Component {\n  constructor() {\n    super();\n\n    this.checkForUser = async () => {\n      const currentUser = await fetch(process.env.REACT_APP_BACKEND + '/current', {\n        credentials: 'include'\n      });\n      const parsedResponse = await currentUser.json();\n\n      if (parsedResponse.status == 200) {\n        this.setState({\n          loggedIn: true,\n          currentUser: currentUser\n        });\n      }\n    };\n\n    this.handleLogin = async formData => {\n      //console.log(formData);\n      try {\n        const loginResponse = await fetch(process.env.REACT_APP_BACKEND + '/login', {\n          method: 'POST',\n          body: JSON.stringify(formData),\n          credentials: 'include',\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        const parsedLoginResponse = await loginResponse.json();\n        console.log(parsedLoginResponse, 'LOGIN HANDLED');\n\n        if (parsedLoginResponse.status != 500) {\n          this.setState({\n            loggedIn: true,\n            currentUser: parsedLoginResponse\n          });\n        }\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    this.handleLogout = async () => {\n      console.log(\"logout hit\");\n      const response = await fetch(process.env.REACT_APP_BACKEND + '/logout', {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      this.setState({\n        loggedIn: false,\n        currentUser: \"\"\n      });\n    };\n\n    this.handleRegister = async formData => {\n      console.log(formData);\n      const response = await fetch(process.env.REACT_APP_BACKEND + '/users', {\n        method: 'POST',\n        body: JSON.stringify(formData),\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      const parsedResponse = await response.json();\n      console.log(parsedResponse, \"PARSED RESPONSE FROM REGISTER\");\n\n      if (parsedResponse.status != 500) {\n        this.setState({\n          loggedIn: true,\n          currentUser: parsedResponse\n        });\n      }\n\n      console.log(this.state, 'STATE AFTER REGISTRERING');\n    };\n\n    this.updateUser = async (id, user) => {\n      console.log('UPDATE CLICKED');\n      const response = await fetch(process.env.REACT_APP_BACKEND + \"/users/\".concat(id), {\n        method: 'PUT',\n        body: JSON.stringify(user),\n        credentials: 'include',\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      });\n      console.log('MADE IT PAST RESPONSE');\n      const updatedUser = await response.json();\n      console.log(updatedUser);\n\n      if (response.status === 200) {\n        console.log('GOOD JOB!!!!!');\n        this.setState({\n          currentUser: updatedUser\n        });\n        console.log(this.state, \"<<<<<<<<<<<<<<<<<<STATE\");\n      }\n    };\n\n    this.deleteUser = async id => {\n      if (this.state.currentUser !== null) {\n        console.log(\"DELETING USER \".concat(this.state.currentUser.username));\n        const deletedUser = await fetch(process.env.REACT_APP_BACKEND + \"/users/\".concat(this.state.currentUser.id), {\n          method: 'DELETE'\n        });\n\n        if (deletedUser) {\n          this.setState({\n            loggedIn: false,\n            currentUser: null\n          });\n        }\n      }\n    };\n\n    this.state = {\n      loggedIn: false,\n      currentUser: null\n    };\n  }\n\n  componentDidMount() {//this.checkForUser();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, this.state.loggedIn ? React.createElement(MainContainer, {\n      handleLogout: this.handleLogout,\n      loggedIn: this.state.loggedIn,\n      currentUser: this.state.currentUser,\n      updateUser: this.updateUser,\n      deleteUser: this.deleteUser,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }) : React.createElement(AuthPage, {\n      handleLogin: this.handleLogin,\n      handleRegister: this.handleRegister,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/shadiaoutabachi/Desktop/sei-main/hikingapp/hikingApp-frontend/src/App.js"],"names":["React","Component","AuthPage","MainContainer","App","constructor","checkForUser","currentUser","fetch","process","env","REACT_APP_BACKEND","credentials","parsedResponse","json","status","setState","loggedIn","handleLogin","formData","loginResponse","method","body","JSON","stringify","headers","parsedLoginResponse","console","log","err","handleLogout","response","handleRegister","state","updateUser","id","user","updatedUser","deleteUser","username","deletedUser","componentDidMount","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport AuthPage from './AuthPage/AuthPage'\nimport MainContainer from './MainContainer/MainContainer';\n\nclass App extends Component {\n  constructor(){\n    super();\n    this.state = {\n      loggedIn: false,\n      currentUser: null\n    }\n  }\n  componentDidMount(){\n    //this.checkForUser();\n  }\n  checkForUser = async () => {\n    const currentUser = await fetch(process.env.REACT_APP_BACKEND + '/current', {\n      credentials: 'include'\n    })\n    const parsedResponse = await currentUser.json();\n    if(parsedResponse.status == 200){\n      this.setState({\n        loggedIn: true,\n        currentUser: currentUser\n      })\n    }\n  }\n  handleLogin = async (formData) => {\n    //console.log(formData);\n    try{\n      const loginResponse = await fetch(process.env.REACT_APP_BACKEND + '/login', {\n        method: 'POST',\n        body: JSON.stringify(formData),\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      })\n      const parsedLoginResponse = await loginResponse.json();\n      console.log(parsedLoginResponse, 'LOGIN HANDLED');\n      if (parsedLoginResponse.status != 500){\n      this.setState({\n        loggedIn: true,\n        currentUser: parsedLoginResponse\n      })\n      }\n    }catch(err){\n      console.log(err);\n    }\n  }\n  handleLogout = async () => {\n    console.log(\"logout hit\")\n    const response = await fetch(process.env.REACT_APP_BACKEND + '/logout', {\n      method: 'POST',\n      credentials: 'include',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n    this.setState({\n      loggedIn: false,\n      currentUser: \"\"\n    })\n  }\n  handleRegister = async (formData) => {\n    console.log(formData);\n    const response = await fetch(process.env.REACT_APP_BACKEND +  '/users', {\n      method: 'POST',\n      body: JSON.stringify(formData),\n      credentials: 'include',\n      headers: {\n        'Content-Type':  'application/json'\n      }\n    })\n    const parsedResponse = await response.json();\n    console.log(parsedResponse, \"PARSED RESPONSE FROM REGISTER\");\n    if (parsedResponse.status != 500){\n      this.setState({\n        loggedIn: true,\n        currentUser: parsedResponse\n      })\n  }\n    console.log(this.state, 'STATE AFTER REGISTRERING')\n  }\n  updateUser = async (id, user) => {\n    console.log('UPDATE CLICKED')\n    const response = await fetch(process.env.REACT_APP_BACKEND + `/users/${id}`, {\n        method: 'PUT',\n        body: JSON.stringify(user),\n        credentials: 'include',\n        headers: {\n            \"Content-Type\": \"application/json\"\n        }\n    })\n    console.log('MADE IT PAST RESPONSE')\n    const updatedUser = await response.json();\n    console.log(updatedUser);\n    if(response.status === 200){\n        console.log('GOOD JOB!!!!!')\n        this.setState({\n            currentUser: updatedUser\n        })\n        console.log(this.state, \"<<<<<<<<<<<<<<<<<<STATE\")\n    }\n\n  }\n  deleteUser = async (id) => {\n    if(this.state.currentUser !== null){\n      console.log(`DELETING USER ${this.state.currentUser.username}`)\n      const deletedUser =  await fetch(process.env.REACT_APP_BACKEND + `/users/${this.state.currentUser.id}`, {\n        method: 'DELETE'\n      })\n      if(deletedUser){\n        this.setState({\n          loggedIn: false,\n          currentUser: null\n        })\n      }\n    }\n  } \n  render(){\n \n\n    return (\n      <div className=\"App\">\n       {this.state.loggedIn ?\n       <MainContainer handleLogout={this.handleLogout} loggedIn = {this.state.loggedIn} currentUser = {this.state.currentUser} updateUser = {this.updateUser} deleteUser = {this.deleteUser}/>\n       :\n       <AuthPage handleLogin = {this.handleLogin} handleRegister = {this.handleRegister}/>\n      }\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}